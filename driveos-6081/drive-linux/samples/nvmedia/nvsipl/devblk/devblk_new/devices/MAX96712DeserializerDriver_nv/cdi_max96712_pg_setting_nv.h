/*
 * Copyright (c) 2022, NVIDIA CORPORATION.  All rights reserved. All
 * information contained herein is proprietary and confidential to NVIDIA
 * Corporation.  Any use, reproduction, or disclosure without the written
 * permission of NVIDIA Corporation is prohibited.
 */

#ifndef CDI_MAX96712_PG_SETTING_NV_H
#define CDI_MAX96712_PG_SETTING_NV_H

#if !NV_IS_SAFETY
#include "devblk_cdi_i2c.h"

/* 1920x1236, 30FPS */
static DevBlkCDII2CReg PGArr1920x1236_30FPS_PATGEN0[] = {
    {0x1051, 0x20, 0x03E8},  /* Delay 1ms. FIx for Getframe timeouts on QNX. Bug 2189783*/
    {0x1052, 0x00}, /* VS_DLY  */
    {0x1053, 0x00},
    {0x1054, 0x00},
    {0x1055, 0x00}, /* VS_HIGH */
    {0x1056, 0x3D},
    {0x1057, 0x68},
    {0x1058, 0x4B}, /* VS_LOW */
    {0x1059, 0x9B},
    {0x105A, 0x40},
    {0x105B, 0x09}, /* V2H */
    {0x105C, 0xD3},
    {0x105D, 0x50},
    {0x105E, 0x0C}, /* HS_HIGH */
    {0x105F, 0x1C},
    {0x1060, 0x00}, /* HS_LOW */
    {0x1061, 0x2C},
    {0x1062, 0x06}, /* HS_CNT */
    {0x1063, 0x2D},
    {0x1064, 0x09}, /* V2D */
    {0x1065, 0xD5},
    {0x1066, 0xA8},
    {0x1067, 0x07}, /* DE_HIGH */
    {0x1068, 0x80},
    {0x1069, 0x04}, /* DE_LOW */
    {0x106A, 0xD8},
    {0x106B, 0x04}, /* DE_CNT */
    {0x106C, 0xD4},
    {0x106D, 0x03},
    {0x106E, 0x80},
    {0x106F, 0x00},
    {0x1070, 0x04},
    {0x1071, 0x00},
    {0x1072, 0x08},
    {0x1073, 0x80},
    {0x1074, 0x50},
    {0x1075, 0xA0},
    {0x1076, 0x50},
    {0x01DD, 0x1B},
    {0x01FD, 0x1B},
    {0x021D, 0x1B},
    {0x023D, 0x1B},
    {0x025D, 0x1B},
    {0x027D, 0x1B},
    {0x029D, 0x1B},
    {0x02BD, 0x1B},
    {0x0006, 0x00}, /* disable all links */
    {0x0018, 0x0F},

    {0x0009, 0x02}, /* Set pattern generator clock frequency to 150 MHz */
};

/* 1920x1236, 60FPS */
static DevBlkCDII2CReg PGArr1920x1236_60FPS_PATGEN0[] = {
    {0x1051, 0x20, 0x03E8},  /* Delay 1ms. FIx for Getframe timeouts on QNX. Bug 2189783*/
    {0x1052, 0x00}, /* VS_DLY  */
    {0x1053, 0x00},
    {0x1054, 0x00},
    {0x1055, 0x0C}, /* VS_HIGH */
    {0x1056, 0xE8},
    {0x1057, 0xB0},
    {0x1058, 0x52}, /* VS_LOW */
    {0x1059, 0x71},
    {0x105A, 0xF0},
    {0x105B, 0x19}, /* V2H */
    {0x105C, 0xD0},
    {0x105D, 0x34},
    {0x105E, 0x09}, /* HS_HIGH */
    {0x105F, 0xD8},
    {0x1060, 0x01}, /* HS_LOW */
    {0x1061, 0x2C},
    {0x1062, 0x08}, /* HS_CNT */
    {0x1063, 0xA8},
    {0x1064, 0x19}, /* V2D */
    {0x1065, 0xD1},
    {0x1066, 0x60},
    {0x1067, 0x07}, /* DE_HIGH */
    {0x1068, 0x80},
    {0x1069, 0x03}, /* DE_LOW */
    {0x106A, 0x84},
    {0x106B, 0x04}, /* DE_CNT */
    {0x106C, 0xD4},
    {0x106D, 0x03},
    {0x106E, 0x80},
    {0x106F, 0x00},
    {0x1070, 0x04},
    {0x1071, 0x00},
    {0x1072, 0x08},
    {0x1073, 0x80},
    {0x1074, 0x50},
    {0x1075, 0xA0},
    {0x1076, 0x50},
    {0x01DD, 0x1B},
    {0x01FD, 0x1B},
    {0x021D, 0x1B},
    {0x023D, 0x1B},
    {0x025D, 0x1B},
    {0x027D, 0x1B},
    {0x029D, 0x1B},
    {0x02BD, 0x1B},
    {0x0006, 0x00}, /* disable all links */
    {0x0018, 0x0F},

    {0x0009, 0x02}, /* Set pattern generator clock frequency to 375 MHz */
};

/* 3848x2168, 30FPS */
static DevBlkCDII2CReg PGArr3848x2168_30FPS_PATGEN0[] = {
    {0x1051, 0x20, 0x03E8},  /* Delay 1ms. FIx for Getframe timeouts on QNX. Bug 2189783*/
    {0x1052, 0x00}, /* VS_DLY  */
    {0x1053, 0x00},
    {0x1054, 0x00},
    {0x1055, 0x0E}, /* VS_HIGH */
    {0x1056, 0x59},
    {0x1057, 0x5C},
    {0x1058, 0xB0}, /* VS_LOW */
    {0x1059, 0x5B},
    {0x105A, 0x56},
    {0x105B, 0x1C}, /* V2H */
    {0x105C, 0xB1},
    {0x105D, 0xE6},
    {0x105E, 0x10}, /* HS_HIGH */
    {0x105F, 0xAC},
    {0x1060, 0x00}, /* HS_LOW */
    {0x1061, 0xD2},
    {0x1062, 0x0A}, /* HS_CNT */
    {0x1063, 0xE7},
    {0x1064, 0x1C}, /* V2D */
    {0x1065, 0xB2},
    {0x1066, 0xB8},
    {0x1067, 0x0F}, /* DE_HIGH */
    {0x1068, 0x08},
    {0x1069, 0x02}, /* DE_LOW */
    {0x106A, 0x76},
    {0x106B, 0x08}, /* DE_CNT */
    {0x106C, 0x78},
    {0x106D, 0x03},
    {0x106E, 0x80},
    {0x106F, 0x00},
    {0x1070, 0x04},
    {0x1071, 0x00},
    {0x1072, 0x08},
    {0x1073, 0x80},
    {0x1074, 0x50},
    {0x1075, 0xA0},
    {0x1076, 0x50},
    {0x01DD, 0x1B},
    {0x01FD, 0x1B},
    {0x021D, 0x1B},
    {0x023D, 0x1B},
    {0x025D, 0x1B},
    {0x027D, 0x1B},
    {0x029D, 0x1B},
    {0x02BD, 0x1B},
    {0x0006, 0x00}, /* disable all links */
    {0x0018, 0x0F},

    {0x0009, 0x02}, /* Set pattern generator clock frequency to 375 MHz */
};

/* 3848x2168, 30FPS */
static DevBlkCDII2CReg PGArr2880x1860_30FPS_PATGEN0[] = {
    {0x1051, 0x20, 0x03E8},  /* Delay 1ms. FIx for Getframe timeouts on QNX. Bug 2189783*/
    {0x1052, 0x00},
    {0x1053, 0x00},
    {0x1054, 0x00},
    {0x1055, 0x18},
    {0x1056, 0xE7},
    {0x1057, 0x00},
    {0x1058, 0xA5},
    {0x1059, 0xC9},
    {0x105A, 0x90},
    {0x105B, 0x31},
    {0x105C, 0xCC},
    {0x105D, 0x70},
    {0x105E, 0x0E},
    {0x105F, 0x60},
    {0x1060, 0x01},
    {0x1061, 0x90},
    {0x1062, 0x0B},
    {0x1063, 0xF7},
    {0x1064, 0x31},
    {0x1065, 0xCE},
    {0x1066, 0x00},
    {0x1067, 0x0B},
    {0x1068, 0x40},
    {0x1069, 0x04},
    {0x106A, 0xB0},
    {0x106B, 0x07},
    {0x106C, 0x44},
    {0x106D, 0x03},
    {0x106E, 0x80},
    {0x106F, 0x00},
    {0x1070, 0x04},
    {0x1071, 0x00},
    {0x1072, 0x08},
    {0x1073, 0x80},
    {0x1074, 0x50},
    {0x1075, 0xA0},
    {0x1076, 0x50},
    {0x01DD, 0x1B},
    {0x01FD, 0x1B},
    {0x021D, 0x1B},
    {0x023D, 0x1B},
    {0x025D, 0x1B},
    {0x027D, 0x1B},
    {0x029D, 0x1B},
    {0x02BD, 0x1B},
    {0x0006, 0x00}, /* disable all links */
    {0x0018, 0x0F},

    {0x0009, 0x02}, /* Set pattern generator clock frequency to 375 MHz */
};
static inline DevBlkCDII2CRegList *GetConfigPGArrCmd(PGModeMAX96712 pgMode)
{

    static DevBlkCDII2CRegList configPGArrCmd[] = {
        { /* CDI_MAX96712_PG_1920_1236_30FPS */
            .regs = PGArr1920x1236_30FPS_PATGEN0,
            .numRegs = (uint32_t)(sizeof(PGArr1920x1236_30FPS_PATGEN0) /
                                  sizeof(PGArr1920x1236_30FPS_PATGEN0[0])),
        },
        { /* CDI_MAX96712_PG_1920_1236_60FPS */
            .regs = PGArr1920x1236_60FPS_PATGEN0,
            .numRegs = (uint32_t)(sizeof(PGArr1920x1236_60FPS_PATGEN0) /
                                  sizeof(PGArr1920x1236_60FPS_PATGEN0[0])),
        },
        { /* CDI_MAX96712_PG_3848_2168_30FPS */
            .regs = PGArr3848x2168_30FPS_PATGEN0,
            .numRegs = (uint32_t)(sizeof(PGArr3848x2168_30FPS_PATGEN0) /
                                  sizeof(PGArr3848x2168_30FPS_PATGEN0[0])),
        },
        { /* CDI_MAX96712_PG_2880_1860_30FPS */
            .regs = PGArr2880x1860_30FPS_PATGEN0,
            .numRegs = (uint32_t)(sizeof(PGArr2880x1860_30FPS_PATGEN0) /
                                  sizeof(PGArr2880x1860_30FPS_PATGEN0[0])),
        }
    };
    return &configPGArrCmd[pgMode];
}
static inline DevBlkCDII2CRegList const* GetConfigPGPCLK150MHZ(uint8_t i)
{
    DevBlkCDII2CRegList const* temp;
    static const DevBlkCDII2CReg PGGEN0PCLK150MHZ[] = {
        {0x01DC, 0x00},
        {0x01FC, 0x00},
        {0x021C, 0x00},
        {0x023C, 0x00},
    };
    static const DevBlkCDII2CReg PGGEN1PCLK150MHZ[] = {
        {0x025C, 0x00},
        {0x027C, 0x00},
        {0x029C, 0x00},
        {0x02BC, 0x00},
    };
    static const DevBlkCDII2CRegList configPGPCLK150MHZ[] = {
        {
            .regs = PGGEN0PCLK150MHZ,
            .numRegs = (uint32_t)(sizeof(PGGEN0PCLK150MHZ) /
                                  sizeof(PGGEN0PCLK150MHZ[0]))
        },
        {
            .regs = PGGEN1PCLK150MHZ,
            .numRegs = (uint32_t)(sizeof(PGGEN1PCLK150MHZ) /
                                  sizeof(PGGEN1PCLK150MHZ[0]))
        }
    };

    if (i < MAX96712_MAX_NUM_PG){
        temp = &configPGPCLK150MHZ[i];
    } else {
        temp = NULL;
    }
    return temp;
}

#endif /* !NV_IS_SAFETY */
#endif /* CDI_MAX96712_PG_SETTING_NV_H */

