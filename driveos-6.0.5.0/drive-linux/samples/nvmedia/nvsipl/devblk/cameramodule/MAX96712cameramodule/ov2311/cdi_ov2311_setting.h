/*
 * Copyright (c) 2021-2022, NVIDIA CORPORATION.
 * Copyright (c) 2021-2022, OmniVision Technologies.
 * NVIDIA CORPORATION and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA CORPORATION is strictly prohibited.
 */

#ifndef __CDI_OV2311_SETTING_H__
#define __CDI_OV2311_SETTING_H__

#include "devblk_cdi_i2c.h"

#define CDIREGLIST(list, setting)          \
    static const DevBlkCDII2CRegList list = {       \
        .regs = setting,   \
        .numRegs = I2C_ARRAY_SIZE(setting), \
    }

/********************************************************************************/
#define OV2311_SCLK    80000000 //Hz

/********************************************************************************/
/*                                                                              */
/********************************************************************************/
static const DevBlkCDII2CReg ov2311_software_reset[]={
    { 0x0103, 0x01, 200},
};
CDIREGLIST( ov2311_reglist_software_reset, ov2311_software_reset );

static const DevBlkCDII2CReg ov2311_streaming_on[]={
    //strobe on
    { 0x3004, 0x02 },
    { 0x3007, 0x02 },
    { 0x3025, 0x02 },

    { 0x0100, 0x01 },
};
CDIREGLIST( ov2311_reglist_stream_on, ov2311_streaming_on );

static const DevBlkCDII2CReg ov2311_streaming_off[]={
    { 0x0100, 0x00 },
};
CDIREGLIST( ov2311_reglist_stream_off, ov2311_streaming_off );

static const DevBlkCDII2CReg ov2311_embeddata_top[]={
    { 0x3016, 0xF1 },
    { 0x0100, 0x01 },
    { 0x4814, 0x6b }, //data type
    { 0x3218, 0x32 }, //SOF
    { 0x3216, 0x01 }, //Embedded line number

    //Contents
    { 0x3208, 0x04 }, //Group Top EmbLine - Start
    { 0x4448, 0x04 }, //Frame Counter ?
    { 0x3808, 0x04 }, // Resolution
    { 0x380e, 0x02 }, // VTS
    { 0x380c, 0x02 }, // HTS
    { 0x350e, 0x02 }, //Current Exposure
    { 0x3514, 0x02 }, //Current Real Gain
    { 0x3518, 0x03 }, //Current Digi Gain
    { 0x5d00, 0x06 }, //AWB Gain
    { 0x4417, 0x02 }, //Temperature
    { 0x3208, 0x14 }, //Group Top EmbLine - End

    { 0x3662, 0x65 }, //RAW10
    { 0x366F, 0x1a }, //
    { 0x3674, 0x11 }, //Enable embedded line
    { 0x0100, 0x00 },
    { 0x3016, 0xF0 }, //
};
CDIREGLIST( ov2311_reglist_emb_top, ov2311_embeddata_top );

static const DevBlkCDII2CReg ov2311_embeddata_bottom[]={
    { 0x0100, 0x00 },
};
CDIREGLIST( ov2311_reglist_emb_bottom, ov2311_embeddata_bottom );

static const DevBlkCDII2CReg ov2311_default_setting[]={
    //@@ R1600x1300 RAW10 MIPI 60fps
    //100 99 1600 1300
    //;;10. 05/19/2020 R1C_V03
    //;24MHz for ARDS

    { 0x0100, 0x00 },
    { 0x010c, 0x02 },
    { 0x010b, 0x01 },
    { 0x0300, 0x01 }, //;24MHz
    { 0x0302, 0x32 }, //;24MHz
    { 0x0303, 0x00 },
    { 0x0304, 0x03 },
    { 0x0305, 0x02 },
    { 0x0306, 0x01 },
    { 0x030b, 0x04 }, //;24MHz
    { 0x030d, 0x5a }, //;24MHz
    { 0x030e, 0x04 },
    { 0x3001, 0x02 },
    { 0x3004, 0x00 },
    { 0x3005, 0x00 },
    { 0x3006, 0x0a },
    { 0x3011, 0x0d },
    { 0x3014, 0x04 },
    { 0x301c, 0xf0 },
    { 0x3020, 0x20 },
    { 0x302c, 0x00 },
    { 0x302d, 0x00 },
    { 0x302e, 0x00 },
    { 0x302f, 0x03 },
    { 0x3030, 0x10 },
    { 0x303f, 0x03 },
    { 0x3103, 0x00 },
    { 0x3106, 0x08 },
    { 0x31ff, 0x01 },
    { 0x3501, 0x05 },
    { 0x3502, 0x7c },
    { 0x3506, 0x00 },
    { 0x3507, 0x00 },
    { 0x3620, 0x67 },
    { 0x3633, 0x78 },
    { 0x3662, 0x65 },
    { 0x3664, 0xb0 },
    { 0x3666, 0x70 },
    { 0x3670, 0x68 },
    { 0x3674, 0x10 },
    { 0x3675, 0x00 },
    { 0x367e, 0x90 },
    { 0x3680, 0x84 },
    { 0x3683, 0x96 },
    { 0x36a2, 0x04 },
    { 0x36a3, 0x80 },
    { 0x36b0, 0x00 },
    { 0x3700, 0x35 },
    { 0x3704, 0x39 },
    { 0x370a, 0x50 },
    { 0x3712, 0x00 },
    { 0x3713, 0x02 },
    { 0x3778, 0x00 },
    { 0x379b, 0x01 },
    { 0x379c, 0x10 },
    { 0x3800, 0x00 },
    { 0x3801, 0x00 },
    { 0x3802, 0x00 },
    { 0x3803, 0x00 },
    { 0x3804, 0x06 },
    { 0x3805, 0x4f },
    { 0x3806, 0x05 },
    { 0x3807, 0x23 },
    { 0x3808, 0x06 },
    { 0x3809, 0x40 },
    { 0x380a, 0x05 },
    { 0x380b, 0x14 },
    { 0x380c, 0x03 },
    { 0x380d, 0xa8 },
    { 0x380e, 0x05 },
    { 0x380f, 0x88 },
    { 0x3810, 0x00 },
    { 0x3811, 0x08 },
    { 0x3812, 0x00 },
    { 0x3813, 0x08 },
    { 0x3814, 0x11 },
    { 0x3815, 0x11 },
    { 0x3816, 0x00 },
    { 0x3817, 0x01 },
    { 0x3818, 0x00 },
    { 0x3819, 0x05 },
    { 0x3820, 0x00 },
    { 0x3821, 0x00 },
    { 0x382b, 0x52 },
    { 0x382c, 0x0a },
    { 0x382d, 0xf8 },
    { 0x3881, 0x44 },
    { 0x3882, 0x02 },
    { 0x3883, 0x8c },
    { 0x3885, 0x07 },
    { 0x389d, 0x03 },
    { 0x38a6, 0x00 },
    { 0x38a7, 0x01 },
    { 0x38b3, 0x07 },
    { 0x38b1, 0x00 },
    { 0x38e5, 0x02 },
    { 0x38e7, 0x00 },
    { 0x38e8, 0x00 },
    { 0x3910, 0xff },
    { 0x3911, 0xff },
    { 0x3912, 0x08 },
    { 0x3913, 0x00 },
    { 0x3914, 0x00 },
    { 0x3915, 0x00 },
    { 0x391c, 0x00 },
    { 0x3920, 0xff },
    { 0x3921, 0x00 }, //80
    { 0x3922, 0x00 },
    { 0x3923, 0x00 },
    { 0x3924, 0x00 }, //05
    { 0x3925, 0x00 },
    { 0x3926, 0x00 },
    { 0x3927, 0x00 },
    { 0x3928, 0x80 }, //1a
    { 0x392b, 0x00 },
    { 0x392c, 0x00 },
    { 0x392d, 0x03 },
    { 0x392e, 0xa8 },
    { 0x392f, 0x0b }, //08
    { 0x4001, 0x00 },
    { 0x4003, 0x40 },
    { 0x4008, 0x04 },
    { 0x4009, 0x1b },
    { 0x400c, 0x04 },
    { 0x400d, 0x1b },
    { 0x4010, 0xf4 },
    { 0x4011, 0x00 },
    { 0x4016, 0x00 },
    { 0x4017, 0x04 },
    { 0x4042, 0x11 },
    { 0x4043, 0x70 },
    { 0x4045, 0x00 },
    { 0x4409, 0x5f },
    { 0x4509, 0x00 },
    { 0x450b, 0x00 },
    { 0x4600, 0x00 },
    { 0x4601, 0xa0 },
    { 0x4708, 0x09 },
    { 0x470c, 0x81 },
    { 0x4710, 0x06 },
    { 0x4711, 0x00 },
    { 0x4800, 0x00 },
    { 0x481f, 0x30 },
    { 0x4837, 0x14 },
    { 0x4f00, 0x00 },
    { 0x4f07, 0x00 },
    { 0x4f08, 0x03 },
    { 0x4f09, 0x08 },
    { 0x4f0c, 0x05 },
    { 0x4f0d, 0xb4 },
    { 0x4f10, 0x00 },
    { 0x4f11, 0x00 },
    { 0x4f12, 0x07 },
    { 0x4f13, 0xe2 },
    { 0x5000, 0x9f }, // trying to 1f?
    { 0x5001, 0x20 },
    { 0x5026, 0x00 },
    { 0x5c00, 0x00 },
    { 0x5c01, 0x2c },
    { 0x5c02, 0x00 },
    { 0x5c03, 0x7f },
    { 0x5e00, 0x00 },
    { 0x5e01, 0x41 },
    { 0x38b1, 0x02 },
    { 0x3880, 0x00 },

    { 0x3501, 0x05 },
    { 0x3502, 0x70 },

};
CDIREGLIST( ov2311_reglist_default, ov2311_default_setting );

static const DevBlkCDII2CReg ov2311_format_30fps[]={
    { 0x380e, 0x0b },
    { 0x380f, 0x10 },
};
CDIREGLIST( ov2311_reglist_config_30fps, ov2311_format_30fps );

static const DevBlkCDII2CReg ov2311_charmode_setting[]={
    { 0x0100, 0x00 },
};
CDIREGLIST( ov2311_reglist_charmode, ov2311_charmode_setting );

static const DevBlkCDII2CReg ov2311_testpattern_setting[]={
    { 0x0100, 0x00 },
};
CDIREGLIST( ov2311_reglist_config_testpattern, ov2311_testpattern_setting );

#endif //__CDI_OV2311_SETTING_H__